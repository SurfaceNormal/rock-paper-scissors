<!DOCTYPE html>
<html>
<head>
  <title>ROCK, PAPER, SCISSORS!</title>
</head>
<body>
	<p>Open the console (CTRL+SHIFT+I), and let's play! Type "game()" to start!</p>
  <script>
  	let playerScore = 0;
  	let computerScore = 0;
  	let ties = 0;

	function computerPlay() { // Randomize the Computer's selection
		let randomChoice = Math.floor(Math.random() * Math.floor(3));

		if (randomChoice == 0){
			return "rock";
		} else if (randomChoice == 1) {
			return "paper";
		} 

		return "scissors";
	}    

	function playerChoice() { // Prompt user for pick; default to randomized choice if we get unexpected input
		let selection = prompt("What's your pick? Rock? Paper? Or scissors?").toLowerCase();

		// In case of mistyped/unexpected choice, 
		let uncooperativePlayer = computerPlay();

		if (selection != 'rock' && selection != 'paper' && selection != 'scissors') {

			console.log("Sorry, I didn't get that. Let's try " + uncooperativePlayer); 
			return uncooperativePlayer;
		}

		return selection;
	}

	function playRound(playerSelection, computerSelection) {
		if (playerSelection == computerSelection) {
			console.log("You tie! (" + playerSelection + ")");
			ties++;
			return 0;
		} else if (playerSelection == 'rock' && computerSelection == 'scissors') {
				console.log("You win! Rock beats scissors!");
				playerScore++;
				return 1;
		} else if (playerSelection == 'paper' && computerSelection == 'rock') {
				console.log("You win! Paper beats rock!");
				playerScore++;
				return 1;
		} else if (playerSelection == 'scissors' && computerSelection == 'paper') {
				console.log("You win! Scissors beats paper!");
				playerScore++;
				return 1;
		} else if (computerSelection == 'rock' && playerSelection == 'scissors') {
				console.log("You lose! Rock beats scissors!");
				computerScore++;
				return -1;
		} else if (computerSelection == 'paper' && playerSelection == 'rock') {
				console.log("You lose! Paper beats rock!");
				computerScore++;
				return -1;
		}	
		console.log("You lose! Scissors beats paper!");
		computerScore++;
		return -1;
	}

	function game() {
		console.log("Let's go! A best of five!");

		let score = 0;

		for (i=0; i < 5; i++) {
			score += playRound(playerChoice(), computerPlay());
			console.log("Player: " + playerScore + ", Computer: " + computerScore + ", Ties: " + ties);
		}

		if (score == 0) {
			console.log("It's a draw!");
		} else if (score < 0) {
			console.log("Computer wins! Differential: " + score);
		} else {
			console.log("Congratulations, you win! Differential: " + score);
		}

		// Reset score
		computerScore = 0;
		playerScore = 0;
		ties = 0;
	}
  </script>
</body>
</html>
